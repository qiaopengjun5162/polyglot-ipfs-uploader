// main.go
package main

import (
	"bytes"
	"encoding/json"
	"fmt"
	"io/fs"
	"log"
	"os"
	"os/exec"
	"path/filepath"
	"sort"
	"strconv"
	"strings"
	"time"
)

// âœ… é…ç½®å¼€å…³
// è®¾ç½®ä¸º true  -> ç”Ÿæˆ 1.json, 2.json... (ç”¨äºéœ€è¦åç¼€çš„åˆçº¦)
// è®¾ç½®ä¸º false -> ç”Ÿæˆ 1, 2... (ç”¨äºæ ‡å‡† ERC721A åˆçº¦)
const USE_JSON_SUFFIX = false

// Attribute å®šä¹‰äº†å…ƒæ•°æ®ä¸­çš„å±æ€§ç»“æ„
type Attribute struct {
	TraitType string      `json:"trait_type"`
	Value     interface{} `json:"value"`
}

// NftMetadata å®šä¹‰äº†å…ƒæ•°æ®çš„æ•´ä½“ç»“æ„
type NftMetadata struct {
	Name        string      `json:"name"`
	Description string      `json:"description"`
	Image       string      `json:"image"`
	Attributes  []Attribute `json:"attributes"`
}

// æ ¸å¿ƒä¸Šä¼ å‡½æ•° (ä½¿ç”¨ os/exec)
func uploadToIPFS(targetPath string) (string, error) {
	fmt.Printf("\n--- æ­£åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤: ipfs add -r -Q --cid-version 1 %s ---\n", targetPath)

	// ä½¿ç”¨ ipfs add å‘½ä»¤ä¸Šä¼ 
	cmd := exec.Command("ipfs", "add", "-r", "-Q", "--cid-version", "1", targetPath)
	var out bytes.Buffer
	var stderr bytes.Buffer
	cmd.Stdout = &out
	cmd.Stderr = &stderr

	err := cmd.Run()
	if err != nil {
		return "", fmt.Errorf("âŒ ä¸Šä¼ å¤±è´¥: %s\n%s", err, stderr.String())
	}

	cid := strings.TrimSpace(out.String())
	fmt.Println("âœ… ä¸Šä¼ æˆåŠŸ!")
	fmt.Printf("   - åç§°: %s\n", filepath.Base(targetPath))
	fmt.Printf("   - CID: %s\n", cid)
	return cid, nil
}

// å·¥ä½œæµä¸€ï¼šå¤„ç†å•ä¸ª NFT
func processSingleNFT(imagePath string) {
	fmt.Println("\n==============================================")
	fmt.Println("ğŸš€ å¼€å§‹å¤„ç†å•ä¸ª NFT...")
	if USE_JSON_SUFFIX {
		fmt.Println("   - æ–‡ä»¶åç¼€æ¨¡å¼: .json")
	} else {
		fmt.Println("   - æ–‡ä»¶åç¼€æ¨¡å¼: æ— ")
	}
	fmt.Println("==============================================")

	// 1. ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶
	imageCid, err := uploadToIPFS(imagePath)
	if err != nil {
		log.Fatal(err)
	}
	fmt.Printf("\nğŸ–¼ï¸  å›¾ç‰‡ CID å·²è·å–: %s\n", imageCid)

	// 2. æ„å»ºå…ƒæ•°æ®
	imageFilename := filepath.Base(imagePath)
	imageNameWithoutExt := strings.TrimSuffix(imageFilename, filepath.Ext(imageFilename))

	metadata := NftMetadata{
		Name:        imageNameWithoutExt,
		Description: fmt.Sprintf("è¿™æ˜¯ä¸€ä¸ªä¸ºå›¾ç‰‡ %s åŠ¨æ€ç”Ÿæˆçš„å…ƒæ•°æ®ã€‚", imageFilename),
		Image:       fmt.Sprintf("ipfs://%s", imageCid),
		Attributes: []Attribute{
			{TraitType: "ç±»å‹", Value: "å•ä»¶è‰ºæœ¯å“"},
		},
	}

	// 3. ä¸Šä¼ å…ƒæ•°æ® JSON
	metadataJSON, _ := json.Marshal(metadata)
	cmd := exec.Command("ipfs", "add", "-Q", "--cid-version", "1")
	cmd.Stdin = bytes.NewReader(metadataJSON)
	var out bytes.Buffer
	cmd.Stdout = &out
	err = cmd.Run()
	if err != nil {
		log.Fatalf("âŒ ä¸Šä¼  JSON å¤±è´¥: %v", err)
	}
	metadataCid := strings.TrimSpace(out.String())
	fmt.Printf("\nâœ… JSON å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ!\n   - CID: %s\n", metadataCid)

	// 4. æœ¬åœ°å½’æ¡£
	outputDir := filepath.Join("output", imageNameWithoutExt)
	os.MkdirAll(outputDir, os.ModePerm)

	// å¤åˆ¶å›¾ç‰‡
	destImage, _ := os.Create(filepath.Join(outputDir, imageFilename))
	srcImage, _ := os.Open(imagePath)
	destImage.ReadFrom(srcImage)
	destImage.Close()
	srcImage.Close()

	// ä¿å­˜å…ƒæ•°æ®
	fileName := imageNameWithoutExt
	if USE_JSON_SUFFIX {
		fileName += ".json"
	}
	metadataFile, _ := os.Create(filepath.Join(outputDir, fileName))
	prettyJSON, _ := json.MarshalIndent(metadata, "", "    ")
	metadataFile.Write(prettyJSON)
	metadataFile.Close()

	fmt.Printf("\nğŸ’¾ å›¾ç‰‡å’Œå…ƒæ•°æ®å·²åœ¨æœ¬åœ°æ‰“åŒ…ä¿å­˜è‡³: %s\n", outputDir)
	fmt.Println("\n--- âœ¨ å•ä»¶æµç¨‹å®Œæˆ âœ¨ ---")
	fmt.Printf("ä¸‹ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥åœ¨ mint å‡½æ•°ä¸­ä½¿ç”¨è¿™ä¸ªå…ƒæ•°æ® URI: ipfs://%s\n", metadataCid)
}

// å·¥ä½œæµäºŒï¼šå¤„ç†æ‰¹é‡ NFT é›†åˆ
func processBatchCollection(imagesInputDir string) {
	fmt.Println("\n==============================================")
	fmt.Println("ğŸš€ å¼€å§‹å¤„ç†æ‰¹é‡ NFT é›†åˆ...")
	if USE_JSON_SUFFIX {
		fmt.Println("   - æ–‡ä»¶åç¼€æ¨¡å¼: .json")
	} else {
		fmt.Println("   - æ–‡ä»¶åç¼€æ¨¡å¼: æ— ")
	}
	fmt.Println("==============================================")

	// 1. æ‰¹é‡ä¸Šä¼ æ•´ä¸ªå›¾ç‰‡æ–‡ä»¶å¤¹
	imagesFolderCid, err := uploadToIPFS(imagesInputDir)
	if err != nil {
		log.Fatal(err)
	}
	fmt.Printf("\nğŸ–¼ï¸  å›¾ç‰‡æ–‡ä»¶å¤¹ CID å·²è·å–: %s\n", imagesFolderCid)

	// 2. å‡†å¤‡å¹¶æ‰¹é‡ç”Ÿæˆå…ƒæ•°æ®æ–‡ä»¶
	timestamp := time.Now().Format("20060102_150405")
	collectionOutputDir := filepath.Join("output", fmt.Sprintf("collection_%s", timestamp))
	imagesOutputDir := filepath.Join(collectionOutputDir, "images")
	metadataOutputDir := filepath.Join(collectionOutputDir, "metadata")

	// å¤åˆ¶å›¾ç‰‡æ–‡ä»¶å¤¹
	os.MkdirAll(imagesOutputDir, os.ModePerm)
	filepath.Walk(imagesInputDir, func(path string, info fs.FileInfo, err error) error {
		if !info.IsDir() {
			dest := filepath.Join(imagesOutputDir, info.Name())
			src, _ := os.Open(path)
			dst, _ := os.Create(dest)
			dst.ReadFrom(src)
			src.Close()
			dst.Close()
		}
		return nil
	})
	fmt.Printf("\nğŸ’¾ æ‰€æœ‰å›¾ç‰‡å·²å¤åˆ¶åˆ°: %s\n", imagesOutputDir)

	fmt.Println("\n--- æ­£åœ¨ä¸ºæ¯å¼ å›¾ç‰‡ç”Ÿæˆå…ƒæ•°æ® JSON æ–‡ä»¶ ---")
	os.MkdirAll(metadataOutputDir, os.ModePerm)

	files, _ := os.ReadDir(imagesInputDir)
	var imageFiles []string
	for _, file := range files {
		if !file.IsDir() {
			ext := strings.ToLower(filepath.Ext(file.Name()))
			if ext == ".png" || ext == ".jpg" || ext == ".jpeg" || ext == ".gif" {
				imageFiles = append(imageFiles, file.Name())
			}
		}
	}
	sort.Strings(imageFiles)

	for _, fileName := range imageFiles {
		tokenIDStr := strings.TrimSuffix(fileName, filepath.Ext(fileName))
		tokenID, _ := strconv.Atoi(tokenIDStr)
		metadata := NftMetadata{
			Name:        fmt.Sprintf("MetaCore #%d", tokenID),
			Description: "MetaCore é›†åˆä¸­çš„ä¸€ä¸ªç‹¬ç‰¹æˆå‘˜ã€‚",
			Image:       fmt.Sprintf("ipfs://%s/%s", imagesFolderCid, fileName),
			Attributes:  []Attribute{{TraitType: "ID", Value: tokenID}},
		}

		outFileName := tokenIDStr
		if USE_JSON_SUFFIX {
			outFileName += ".json"
		}
		file, _ := os.Create(filepath.Join(metadataOutputDir, outFileName))
		prettyJSON, _ := json.MarshalIndent(metadata, "", "    ")
		file.Write(prettyJSON)
		file.Close()
	}
	fmt.Printf("âœ… æˆåŠŸç”Ÿæˆ %d ä¸ªå…ƒæ•°æ®æ–‡ä»¶åˆ°: %s\n", len(imageFiles), metadataOutputDir)

	// 3. æ‰¹é‡ä¸Šä¼ æ•´ä¸ªå…ƒæ•°æ®æ–‡ä»¶å¤¹
	metadataFolderCid, err := uploadToIPFS(metadataOutputDir)
	if err != nil {
		log.Fatal(err)
	}
	fmt.Printf("\nğŸ“„ å…ƒæ•°æ®æ–‡ä»¶å¤¹ CID å·²è·å–: %s\n", metadataFolderCid)
	fmt.Println("\n--- âœ¨ æ‰¹é‡æµç¨‹å®Œæˆ âœ¨ ---")
	fmt.Printf("ä¸‹ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥åœ¨åˆçº¦ä¸­å°† Base URI è®¾ç½®ä¸º: ipfs://%s/\n", metadataFolderCid)
}

func main() {
	// --- å‰ç½®æ£€æŸ¥ ---
	cmd := exec.Command("ipfs", "id")
	if err := cmd.Run(); err != nil {
		fmt.Println("âŒ è¿æ¥ IPFS èŠ‚ç‚¹å¤±è´¥ã€‚")
		fmt.Println("è¯·ç¡®ä¿ä½ çš„ IPFS èŠ‚ç‚¹æ­£åœ¨è¿è¡Œ (å‘½ä»¤: ipfs daemon)ã€‚")
		os.Exit(1)
	}
	fmt.Println("âœ… æˆåŠŸè¿æ¥åˆ° IPFS èŠ‚ç‚¹")

	// --- å‡†å¤‡å·¥ä½œ ---
	// singleImagePath := filepath.Join("..", "assets", "image", "IMG_20210626_180340.jpg")
	batchImagesPath := filepath.Join("..", "assets", "batch_images")
	os.MkdirAll(batchImagesPath, os.ModePerm)

	// --- åœ¨è¿™é‡Œé€‰æ‹©è¦è¿è¡Œçš„å·¥ä½œæµ ---

	// è¿è¡Œå·¥ä½œæµä¸€ï¼šå¤„ç†å•ä¸ª NFT
	// processSingleNFT(singleImagePath)

	// è¿è¡Œå·¥ä½œæµäºŒï¼šå¤„ç†æ‰¹é‡ NFT é›†åˆ
	processBatchCollection(batchImagesPath)

	// ç”Ÿäº§ç¯å¢ƒæœ€ç»ˆå‘å¸ƒæµç¨‹è¯´æ˜
	fmt.Println("\n======================================================================")
	fmt.Println("âœ… æœ¬åœ°å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼")
	fmt.Println("ä¸‹ä¸€æ­¥æ˜¯å‘å¸ƒåˆ°ä¸“ä¸šçš„ Pinning æœåŠ¡ (å¦‚ Pinata):")
	fmt.Println("1. ç™»å½• Pinataã€‚")
	fmt.Println("2. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/images` æ–‡ä»¶å¤¹ã€‚")
	fmt.Println("3. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/metadata` æ–‡ä»¶å¤¹ã€‚")
	fmt.Println("4. âš ï¸  ä½¿ç”¨ Pinata è¿”å›çš„ã€metadataã€‘æ–‡ä»¶å¤¹çš„ CID æ¥è®¾ç½®æ‚¨åˆçº¦çš„ Base URIã€‚")
	fmt.Println("======================================================================")
}


/**
polyglot-ipfs-uploader/go on î‚  main [!?] via ğŸ¹ v1.24.5 on ğŸ³ v28.2.2 (orbstack)
âœ go run ./main.go
âœ… æˆåŠŸè¿æ¥åˆ° IPFS èŠ‚ç‚¹

==============================================
ğŸš€ å¼€å§‹å¤„ç†æ‰¹é‡ NFT é›†åˆ...
   - æ–‡ä»¶åç¼€æ¨¡å¼: .json
==============================================

--- æ­£åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤: ipfs add -r -Q --cid-version 1 ../assets/batch_images ---
âœ… ä¸Šä¼ æˆåŠŸ!
   - åç§°: batch_images
   - CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e

ğŸ–¼ï¸  å›¾ç‰‡æ–‡ä»¶å¤¹ CID å·²è·å–: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e

ğŸ’¾ æ‰€æœ‰å›¾ç‰‡å·²å¤åˆ¶åˆ°: output/collection_20250726_160112/images

--- æ­£åœ¨ä¸ºæ¯å¼ å›¾ç‰‡ç”Ÿæˆå…ƒæ•°æ® JSON æ–‡ä»¶ ---
âœ… æˆåŠŸç”Ÿæˆ 3 ä¸ªå…ƒæ•°æ®æ–‡ä»¶åˆ°: output/collection_20250726_160112/metadata

--- æ­£åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤: ipfs add -r -Q --cid-version 1 output/collection_20250726_160112/metadata ---
âœ… ä¸Šä¼ æˆåŠŸ!
   - åç§°: metadata
   - CID: bafybeiczqa75ljidb7esu464fj6a64nfujxcd2mum73t5yaw2llkrzb4zy

ğŸ“„ å…ƒæ•°æ®æ–‡ä»¶å¤¹ CID å·²è·å–: bafybeiczqa75ljidb7esu464fj6a64nfujxcd2mum73t5yaw2llkrzb4zy

--- âœ¨ æ‰¹é‡æµç¨‹å®Œæˆ âœ¨ ---
ä¸‹ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥åœ¨åˆçº¦ä¸­å°† Base URI è®¾ç½®ä¸º: ipfs://bafybeiczqa75ljidb7esu464fj6a64nfujxcd2mum73t5yaw2llkrzb4zy/

======================================================================
âœ… æœ¬åœ°å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼
ä¸‹ä¸€æ­¥æ˜¯å‘å¸ƒåˆ°ä¸“ä¸šçš„ Pinning æœåŠ¡ (å¦‚ Pinata):
1. ç™»å½• Pinataã€‚
2. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/images` æ–‡ä»¶å¤¹ã€‚
3. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/metadata` æ–‡ä»¶å¤¹ã€‚
4. âš ï¸  ä½¿ç”¨ Pinata è¿”å›çš„ã€metadataã€‘æ–‡ä»¶å¤¹çš„ CID æ¥è®¾ç½®æ‚¨åˆçº¦çš„ Base URIã€‚
======================================================================

polyglot-ipfs-uploader/go on î‚  main [!?] via ğŸ¹ v1.24.5 on ğŸ³ v28.2.2 (orbstack)
âœ go run ./main.go
âœ… æˆåŠŸè¿æ¥åˆ° IPFS èŠ‚ç‚¹

==============================================
ğŸš€ å¼€å§‹å¤„ç†å•ä¸ª NFT...
   - æ–‡ä»¶åç¼€æ¨¡å¼: .json
==============================================

--- æ­£åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤: ipfs add -r -Q --cid-version 1 ../assets/image/IMG_20210626_180340.jpg ---
âœ… ä¸Šä¼ æˆåŠŸ!
   - åç§°: IMG_20210626_180340.jpg
   - CID: bafybeifwvvo7qacd5ksephyxbqkqjih2dmm2ffgqa6u732b2evw5iijppi

ğŸ–¼ï¸  å›¾ç‰‡ CID å·²è·å–: bafybeifwvvo7qacd5ksephyxbqkqjih2dmm2ffgqa6u732b2evw5iijppi

âœ… JSON å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ!
   - CID: bafkreihhpbkssgrr22r3f3rhrb4hntmbdzfm3ubaun2cfw4p5vyhcgivbi

ğŸ’¾ å›¾ç‰‡å’Œå…ƒæ•°æ®å·²åœ¨æœ¬åœ°æ‰“åŒ…ä¿å­˜è‡³: output/IMG_20210626_180340

--- âœ¨ å•ä»¶æµç¨‹å®Œæˆ âœ¨ ---
ä¸‹ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥åœ¨ mint å‡½æ•°ä¸­ä½¿ç”¨è¿™ä¸ªå…ƒæ•°æ® URI: ipfs://bafkreihhpbkssgrr22r3f3rhrb4hntmbdzfm3ubaun2cfw4p5vyhcgivbi

======================================================================
âœ… æœ¬åœ°å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼
ä¸‹ä¸€æ­¥æ˜¯å‘å¸ƒåˆ°ä¸“ä¸šçš„ Pinning æœåŠ¡ (å¦‚ Pinata):
1. ç™»å½• Pinataã€‚
2. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/images` æ–‡ä»¶å¤¹ã€‚
3. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/metadata` æ–‡ä»¶å¤¹ã€‚
4. âš ï¸  ä½¿ç”¨ Pinata è¿”å›çš„ã€metadataã€‘æ–‡ä»¶å¤¹çš„ CID æ¥è®¾ç½®æ‚¨åˆçº¦çš„ Base URIã€‚
======================================================================

polyglot-ipfs-uploader/go on î‚  main [!?] via ğŸ¹ v1.24.5 on ğŸ³ v28.2.2 (orbstack)
âœ go run ./main.go
âœ… æˆåŠŸè¿æ¥åˆ° IPFS èŠ‚ç‚¹

==============================================
ğŸš€ å¼€å§‹å¤„ç†å•ä¸ª NFT...
   - æ–‡ä»¶åç¼€æ¨¡å¼: æ— 
==============================================

--- æ­£åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤: ipfs add -r -Q --cid-version 1 ../assets/image/IMG_20210626_180340.jpg ---
âœ… ä¸Šä¼ æˆåŠŸ!
   - åç§°: IMG_20210626_180340.jpg
   - CID: bafybeifwvvo7qacd5ksephyxbqkqjih2dmm2ffgqa6u732b2evw5iijppi

ğŸ–¼ï¸  å›¾ç‰‡ CID å·²è·å–: bafybeifwvvo7qacd5ksephyxbqkqjih2dmm2ffgqa6u732b2evw5iijppi

âœ… JSON å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ!
   - CID: bafkreihhpbkssgrr22r3f3rhrb4hntmbdzfm3ubaun2cfw4p5vyhcgivbi

ğŸ’¾ å›¾ç‰‡å’Œå…ƒæ•°æ®å·²åœ¨æœ¬åœ°æ‰“åŒ…ä¿å­˜è‡³: output/IMG_20210626_180340

--- âœ¨ å•ä»¶æµç¨‹å®Œæˆ âœ¨ ---
ä¸‹ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥åœ¨ mint å‡½æ•°ä¸­ä½¿ç”¨è¿™ä¸ªå…ƒæ•°æ® URI: ipfs://bafkreihhpbkssgrr22r3f3rhrb4hntmbdzfm3ubaun2cfw4p5vyhcgivbi

======================================================================
âœ… æœ¬åœ°å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼
ä¸‹ä¸€æ­¥æ˜¯å‘å¸ƒåˆ°ä¸“ä¸šçš„ Pinning æœåŠ¡ (å¦‚ Pinata):
1. ç™»å½• Pinataã€‚
2. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/images` æ–‡ä»¶å¤¹ã€‚
3. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/metadata` æ–‡ä»¶å¤¹ã€‚
4. âš ï¸  ä½¿ç”¨ Pinata è¿”å›çš„ã€metadataã€‘æ–‡ä»¶å¤¹çš„ CID æ¥è®¾ç½®æ‚¨åˆçº¦çš„ Base URIã€‚
======================================================================

polyglot-ipfs-uploader/go on î‚  main [!?] via ğŸ¹ v1.24.5 on ğŸ³ v28.2.2 (orbstack)
âœ go run ./main.go
âœ… æˆåŠŸè¿æ¥åˆ° IPFS èŠ‚ç‚¹

==============================================
ğŸš€ å¼€å§‹å¤„ç†æ‰¹é‡ NFT é›†åˆ...
   - æ–‡ä»¶åç¼€æ¨¡å¼: æ— 
==============================================

--- æ­£åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤: ipfs add -r -Q --cid-version 1 ../assets/batch_images ---
âœ… ä¸Šä¼ æˆåŠŸ!
   - åç§°: batch_images
   - CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e

ğŸ–¼ï¸  å›¾ç‰‡æ–‡ä»¶å¤¹ CID å·²è·å–: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e

ğŸ’¾ æ‰€æœ‰å›¾ç‰‡å·²å¤åˆ¶åˆ°: output/collection_20250726_160334/images

--- æ­£åœ¨ä¸ºæ¯å¼ å›¾ç‰‡ç”Ÿæˆå…ƒæ•°æ® JSON æ–‡ä»¶ ---
âœ… æˆåŠŸç”Ÿæˆ 3 ä¸ªå…ƒæ•°æ®æ–‡ä»¶åˆ°: output/collection_20250726_160334/metadata

--- æ­£åœ¨æ‰§è¡Œä¸Šä¼ å‘½ä»¤: ipfs add -r -Q --cid-version 1 output/collection_20250726_160334/metadata ---
âœ… ä¸Šä¼ æˆåŠŸ!
   - åç§°: metadata
   - CID: bafybeidcdd6osm2gvnxt3vlp434kmfq673fbkv4xtrrkqkpbkqe6iakvdm

ğŸ“„ å…ƒæ•°æ®æ–‡ä»¶å¤¹ CID å·²è·å–: bafybeidcdd6osm2gvnxt3vlp434kmfq673fbkv4xtrrkqkpbkqe6iakvdm

--- âœ¨ æ‰¹é‡æµç¨‹å®Œæˆ âœ¨ ---
ä¸‹ä¸€æ­¥ï¼Œæ‚¨å¯ä»¥åœ¨åˆçº¦ä¸­å°† Base URI è®¾ç½®ä¸º: ipfs://bafybeidcdd6osm2gvnxt3vlp434kmfq673fbkv4xtrrkqkpbkqe6iakvdm/

======================================================================
âœ… æœ¬åœ°å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼
ä¸‹ä¸€æ­¥æ˜¯å‘å¸ƒåˆ°ä¸“ä¸šçš„ Pinning æœåŠ¡ (å¦‚ Pinata):
1. ç™»å½• Pinataã€‚
2. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/images` æ–‡ä»¶å¤¹ã€‚
3. ä¸Šä¼ æ‚¨æœ¬åœ° `go/output/collection_[æ—¶é—´æˆ³]/metadata` æ–‡ä»¶å¤¹ã€‚
4. âš ï¸  ä½¿ç”¨ Pinata è¿”å›çš„ã€metadataã€‘æ–‡ä»¶å¤¹çš„ CID æ¥è®¾ç½®æ‚¨åˆçº¦çš„ Base URIã€‚
======================================================================
*/